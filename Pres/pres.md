---
marp: true
math: mathjax
theme: foobar
class:
    - lead
header: Bash
paginate: true
# size: 4:3

---
# 

![down](img/logo.png)

---

##   Что это? 

Bash (сокращение от «Bourne-again SHell») это стандартный интерпретатор команд на большинстве линукс систем. В его обязанности входит обработка и исполнение команд с помощью которых пользователь управляет компьютером.

---
### Преимущества

- Экономия сил и времени
- Одинаковый результат работы скриптов на разных системах
- Один и  тот же набор синтаксиса, что и в командной строке 
- Низкая сложность написания скриптов
___
### Недостатки

- Низкая скорость работы 
- Ограниченность в функциональности 
___

## Основы

Перед тем, как начать изучение, повторим некоторые стандартные команды, которые нам могут сегодня понадобиться:

- cd - перейти в директорию
- pwd - отображает текущую рабочую папку
- ls - посмотреть директорию
- mkdir - создать директорию
- cat - вывести содержимое фаила на экран
- touch - создать фаил
- mv - переместить или переименовать фаил

---

- rm - удалить фаил, папку
- echo - вывести на экран строку
- chmod - изменение параметров доступа 
- stat - полная информация о фаиле
- | - перенаправление работы в следующую команду вместе с выводом или результатом
- \> - перенаправить поток (перезаписывает фаил)
- \>> - перенаправление потока в конец фаила

---
## Что такое скрипт и с чем его едят

Скрипт - это простой список команд системы, записанный в файл с расширением **.sh**. Создание скриптов  сохранит  время и силы, которые тратятся на ввод последовательности команд всякий раз, когда необходимо их выполнить.

---
Любой bash-скрипт должен начинаться со строки:

```bash
#!/bin/bash 
```
Или более универсальная версия:
```bash
#!/usr/bin/env bash 
```
в этой строке после   **#!**   указывается путь к bash-интерпретатору, поэтому если он у вас установлен в другом месте(где, вы можете узнать набрав whereis bash) поменяйте её на ваш путь.

* *Во всех остальных случаях (кроме первой строки), после # указываются 
комментарии.*

---
## Первый скрипт

Создадим bash-скрипт **Hello_World.sh**, который выводил бы в терминал следующий результат:
```bash
$ ./Hello_World.sh
Hello, <Имя пользователя>!
```
* чтобы запустить скрипт нужно разрешить фаилу запускаться  
* это можно сделать, прописав в консоли: ```$ sudo chmod +x <scriptname.sh>```

---

Теперь додавим в скрипт переменные:
```bash
#!/bin/bash
# Пробелы до и после оператора "=" -- недопустимы!
parametr1=$1 
#присваиваем переменной parametr1 значение первого параметра скрипта
script_name=$0
#присваиваем переменной script_name значение имени скрипта
echo "Hello, $USER!"
echo "Вы запустили скрипт с именем $script_name и параметром $parametr1" 
#обращение к переменным осуществляется через $имя_переменной.
echo 'Вы запустили скрипт с именем $script_name и параметром $parametr1'
# здесь мы видим другие кавычки, разница в том, что в одинарных кавычках 
#не происходит подстановки переменных.
exit 0 
```

---

Кроме того, можно в переменную можно записать вывод какой-либо программы.
Пример:
```bash
path=$(ls -t)
```

---
## Математика и переменные
---
Арифметические операторы:

- \+ -- сложение

- \- -- вычитание

- \* -- умножение

- / -- деление

- \** -- возведение в степень

- % - модуль (деление по модулю), возвращает остаток от деления

* А также битовые операции

---
Способы использования математических выражений:

```bash
let <выражение>
# или
((<пробел><выражение><пробел>)) 
# используется для написания скриптов в стиле С. Возвращает результат выражения
#И в первом и во втором случае можно присваивать в выражениях значения переменным
```

---
### Пример
```bash
let a="5 + 3"
(( b=5+3 ))
[[ $a -eq $b ]]
echo $?
```

---
## Условные операторы в Bash

Структура **if-then-else** используется следующим образом:

*if <команда или набор команд возвращающих код возврата(0 или 1)>
then <если выражение после if истино, то выполняется этот блок>
[elif <условное выражение>
then <если выражение после if истино, то выполняется этот блок>]
[else <если выражение после if ложно, тот этот>]
fi*

* В качестве условного выражения можно использовать любую программу
* 0 - true, 1 - false
* [[ ]] - зарезервированное слово для проверки условий, является расширенной версией [ ]
---
### Пример
```bash
#!/bin/bash
source=$1 #в переменную source забрасываем первый параметр скрипта
dest=$2 #в переменную dest забрасываем второй параметр скрипта

if [[ "$source" -eq "$dest" ]] # в кавычках указываем имена переменных для сравнения. -eq - логическое сравнение обо    значающие "равны"
then # если они действительно равны, то
echo "значения $dest и $source равны!"
elif [[ $(( $source-$dest )) -ne 8 ]] # иначе если
then echo "Разность $source и $dest неравна 8-ми!"
else # если же они не равны
echo "Разность $source и $dest равна 8-ми!"
fi #обозначаем окончание условия.

exit 0
```

---
## Циклы

Цикл -- это блок команд, который исполняется многократно до тех пор, пока не будет выполнено условие выхода из цикла.
```bash
for arg in [list]
do
 команда(ы)...
done
```
* На каждом проходе цикла, переменная-аргумент цикла arg последовательно, одно за другим, принимает значения из списка list

---
### Пример

```bash
#!/bin/bash
# Список планет.

for planet in Меркурий Венера Земля Марс Юпитер Сатурн Уран Нептун Плутон
do
  echo $planet
done

# Если 'список аргументов' заключить в кавычки, то он будет 
#восприниматься как единственный аргумент .
for planet in "Меркурий Венера Земля Марс Юпитер Сатурн Уран Нептун Плутон"
do
  echo $planet
done

echo 

exit 0
```

---
### Результат
```bash
Меркурий
Венера
Земля
Марс
Юпитер
Сатурн
Уран
Нептун
Плутон

Меркурий Венера Земля Марс Юпитер Сатурн Уран Нептун Плутон
```

---
### Еще пример

Применим С-ный стиль:
```bash
#!/bin/bash
for (( index=1; index<=8; index++))
do
  echo "Итерация - $index"
done

exit 0
```

---
## while

Оператор while проверяет условие перед началом каждой итерации и если условие истинно (если код возврата равен 0), то управление передается в тело цикла. В отличие от циклов for, циклы while используются в тех случаях, когда количество итераций заранее не известно.
```bash
while <условное выражение>
do
 <команды>
done
```

---
### Пример 
```bash
#!/bin/bash

var0=0
LIMIT=$1

while [ "$var0" -le "$LIMIT" ] # <=
do
  echo -n "$var0 " # -n подавляет перевод строки.
  ((var0+=1))
done

echo
# Вывод чисел от 0 до параметра
exit 0
```
___
## Пару слов о IFS

Эта переменная задает разделители полей (Internal Field Separator), которые используются при операции разделения слов при преобразованиях командной строки, выполняемых оболочкой перед тем, как запустить командную строку на исполнение.

Изменение переменной IFS:
```bash
olsIFS=$IFS
IFS=$'\n'
# после работы возращем стандартное значение
IFS=$oldIFS
```
---

![down](img/aatt.jpeg)

---
## Полезные команды и программы

Программы:
- man -- документация для программ
- stat -- выводит форматируемый полный список информации по фаилу
- tar -- архиватор

Команды:
- read -- чтение из потока ввода
- и другие 😁

---

## Общее задание

---
## Индивидуальное задание
---
# Спасибо за внимание!👋